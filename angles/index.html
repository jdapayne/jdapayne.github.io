<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Angle generator</title>
    <style type="text/css" media="screen">
        .display-box {
            text-align: center
        }
        .options-part {
            display: inline-block;
            padding-right: 20px;
            vertical-align: top
        }
        .question-container {
            display: inline-block;
            border: thin solid black
        }
        .triangle-view {
            /*border: thin solid red*/
        }

        #showoptions {
            font-size: small;
            display: none
        }

        p {
            margin-top: 0.3em;
            margin-bottom: 0.3em;
        }
    </style>
</head>
<body>
    <p><a id="showoptions" href="#">Hide options</a></p>
    <div id="options">
        <form>
        <div class="options-part">
            <p> Types: <br/>
            <input type="checkbox" id="aosl" checked/><label for "aosl">Angles on a straight line</label>
            <input type="checkbox" id="aaap" disabled/><label for "aaap">Angles around a point</label>
            <input type="checkbox" id="voa" disabled/><label for "voa">Vertically opposite angles</label>
            <input type="checkbox" id="aiat" disabled/><label for "aiat">Angles in a triangle</label>
            <input type="checkbox" id="aiaq" disabled/><label for "aiaq">Angles in a quadrilateral</label></p>

            <p> Options: <br/>
            <input type="checkbox" id="simple" checked disabled/><label for "simple">Simple</label>
            <input type="checkbox" id="repeated" disabled/><label for "repeated">Repeated angles</label>
            <input type="checkbox" id="algebra" disabled/><label for "aosl">Algebraic</label>
            <input type="checkbox" id="algebra-worded" disabled/><label for "aosl">Algebraic (worded)</label>

            <p>Number of questions:<input type="text" id="n-questions" value="4"></p>
        </div>
        <p><button id="generate" type=submit disabled>Go!</button>
        </form>
    </div>

    <div class="display-box"></div>

    <script src="../jquery.js" type="text/javascript" charset="utf-8"></script>
    <script src="aosl.js" type="text/javascript" charset="utf-8"></script>

    <script type="text/javascript" charset="utf-8">

        $(document).ready(function () {
            $("#generate").click(generate);
            $("#generate").attr("disabled",false);
            $(".display-box").on('click','.refresh', function (e) {
                var container = $(e.target).parent().parent();
                container.empty();
                generateInContainer(container);
                e.preventDefault();
            })
        });

        function generateInContainer(container) {
                let canvas = $('<canvas width=300, height=250 class="triangle-view"/>');

                let nangles = Math.floor(2+Math.random()*3);
                let aosl = Aosl.random(nangles);

                drawAosl(aosl,canvas[0]);
                canvas.appendTo(container);
                var refresh = $('<p><img src="refresh.png" width=20 height=20 class="refresh"/></p>');
                refresh.appendTo(container);
        }

        function hideOptions(e) {
            $("#showoptions").html("Show options");
            $("#options").slideUp();
            $("#showoptions").unbind('click').click(showOptions);
            if (e !== undefined) e.preventDefault();
        }

        function showOptions(e) {
            $("#showoptions").html("Hide options");
            $("#showoptions").unbind('click').click(hideOptions);
            $("#options").slideDown();
            if (e !== undefined) e.preventDefault();
        }

        function generate (e) {
            var n = $("#n-questions").val();
            
            $(".display-box").html("");

            for (var i = 0; i < n; i++) {
                let container = $("<div/>");
                container.addClass("question-container");
                container.attr("id","question-container"+i);

                generateInContainer(container);

                container.appendTo($(".display-box"));
            };
            
            $("#showoptions").show();
            hideOptions();

            e.preventDefault();
        }
    </script>

</body>
</html>
