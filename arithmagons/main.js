!function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){var s;
/**
 * @license Fraction.js v4.0.9 09/09/2015
 * http://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
/**
 * @license Fraction.js v4.0.9 09/09/2015
 * http://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2015, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/
!function(n){"use strict";var i=2e3,r={s:1,n:0,d:1};function o(t){function e(){var e=Error.apply(this,arguments);e.name=this.name=t,this.stack=e.stack,this.message=e.message}function n(){}return n.prototype=Error.prototype,e.prototype=new n,e}var a=f.DivisionByZero=o("DivisionByZero"),h=f.InvalidParameter=o("InvalidParameter");function c(t,e){return isNaN(t=parseInt(t,10))&&l(),t*e}function l(){throw new h}var d=function(t,e){var n,s=0,i=1,o=1,h=0,d=0,u=0,f=1,m=1,g=0,w=1,v=1,p=1,y=1e7;if(void 0===t||null===t);else if(void 0!==e)o=(s=t)*(i=e);else switch(typeof t){case"object":"d"in t&&"n"in t?(s=t.n,i=t.d,"s"in t&&(s*=t.s)):0 in t?(s=t[0],1 in t&&(i=t[1])):l(),o=s*i;break;case"number":if(t<0&&(o=t,t=-t),t%1==0)s=t;else if(t>0){for(t>=1&&(t/=m=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)));w<=y&&p<=y;){if(t===(n=(g+v)/(w+p))){w+p<=y?(s=g+v,i=w+p):p>w?(s=v,i=p):(s=g,i=w);break}t>n?(g+=v,w+=p):(v+=g,p+=w),w>y?(s=v,i=p):(s=g,i=w)}s*=m}else(isNaN(t)||isNaN(e))&&(i=s=NaN);break;case"string":if(null===(w=t.match(/\d+|./g))&&l(),"-"===w[g]?(o=-1,g++):"+"===w[g]&&g++,w.length===g+1?d=c(w[g++],o):"."===w[g+1]||"."===w[g]?("."!==w[g]&&(h=c(w[g++],o)),(++g+1===w.length||"("===w[g+1]&&")"===w[g+3]||"'"===w[g+1]&&"'"===w[g+3])&&(d=c(w[g],o),f=Math.pow(10,w[g].length),g++),("("===w[g]&&")"===w[g+2]||"'"===w[g]&&"'"===w[g+2])&&(u=c(w[g+1],o),m=Math.pow(10,w[g+1].length)-1,g+=3)):"/"===w[g+1]||":"===w[g+1]?(d=c(w[g],o),f=c(w[g+2],1),g+=3):"/"===w[g+3]&&" "===w[g+1]&&(h=c(w[g],o),d=c(w[g+2],o),f=c(w[g+4],1),g+=5),w.length<=g){o=s=u+(i=f*m)*h+m*d;break}default:l()}if(0===i)throw new a;r.s=o<0?-1:1,r.n=Math.abs(s),r.d=Math.abs(i)};function u(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function f(t,e){if(!(this instanceof f))return new f(t,e);d(t,e),t=f.REDUCE?u(r.d,r.n):1,this.s=r.s,this.n=r.n/t,this.d=r.d/t}f.REDUCE=1,f.prototype={s:1,n:0,d:1,abs:function(){return new f(this.n,this.d)},neg:function(){return new f(-this.s*this.n,this.d)},add:function(t,e){return d(t,e),new f(this.s*this.n*r.d+r.s*this.d*r.n,this.d*r.d)},sub:function(t,e){return d(t,e),new f(this.s*this.n*r.d-r.s*this.d*r.n,this.d*r.d)},mul:function(t,e){return d(t,e),new f(this.s*r.s*this.n*r.n,this.d*r.d)},div:function(t,e){return d(t,e),new f(this.s*r.s*this.n*r.d,this.d*r.n)},clone:function(){return new f(this)},mod:function(t,e){return isNaN(this.n)||isNaN(this.d)?new f(NaN):void 0===t?new f(this.s*this.n%this.d,1):(d(t,e),0===r.n&&0===this.d&&f(0,0),new f(this.s*(r.d*this.n)%(r.n*this.d),r.d*this.d))},gcd:function(t,e){return d(t,e),new f(u(r.n,this.n)*u(r.d,this.d),r.d*this.d)},lcm:function(t,e){return d(t,e),0===r.n&&0===this.n?new f:new f(r.n*this.n,u(r.n,this.n)*u(r.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):new f(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):new f(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new f(NaN):new f(Math.round(t*this.s*this.n/this.d),t)},inverse:function(){return new f(this.s*this.d,this.n)},pow:function(t){return t<0?new f(Math.pow(this.s*this.d,-t),Math.pow(this.n,-t)):new f(Math.pow(this.s*this.n,t),Math.pow(this.d,t))},equals:function(t,e){return d(t,e),this.s*this.n*r.d==r.s*r.n*this.d},compare:function(t,e){d(t,e);var n=this.s*this.n*r.d-r.s*r.n*this.d;return(0<n)-(n<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;var e=this.abs().toContinued();function n(t){return 1===t.length?new f(t[0]):n(t.slice(1)).inverse().add(t[0])}t=t||.001;for(var s=0;s<e.length;s++){var i=n(e.slice(0,s+1));if(i.sub(this.abs()).abs().valueOf()<t)return i.mul(this.s)}return this},divisible:function(t,e){return d(t,e),!(!(r.n*this.d)||this.n*r.d%(r.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",s=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=s:(t&&(e=Math.floor(s/i))>0&&(n+=e,n+=" ",s%=i),n+=s,n+="/",n+=i),n},toLatex:function(t){var e,n="",s=this.n,i=this.d;return this.s<0&&(n+="-"),1===i?n+=s:(t&&(e=Math.floor(s/i))>0&&(n+=e,s%=i),n+="\\frac{",n+=s,n+="}{",n+=i,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,s=[];if(isNaN(this.n)||isNaN(this.d))return s;do{s.push(Math.floor(e/n)),t=e%n,e=n,n=t}while(1!==e);return s},toString:function(t){var e,n=this.n,s=this.d;if(isNaN(n)||isNaN(s))return"NaN";f.REDUCE||(n/=e=u(n,s),s/=e),t=t||15;var r=function(t,e){for(;e%2==0;e/=2);for(;e%5==0;e/=5);if(1===e)return 0;for(var n=10%e,s=1;1!==n;s++)if(n=10*n%e,s>i)return 0;return s}(0,s),o=function(t,e,n){for(var s=1,i=function(t,e,n){for(var s=1;e>0;t=t*t%n,e>>=1)1&e&&(s=s*t%n);return s}(10,n,e),r=0;r<300;r++){if(s===i)return r;s=10*s%e,i=10*i%e}return 0}(0,s,r),a=-1===this.s?"-":"";if(a+=n/s|0,n%=s,(n*=10)&&(a+="."),r){for(var h=o;h--;)a+=n/s|0,n%=s,n*=10;a+="(";for(h=r;h--;)a+=n/s|0,n%=s,n*=10;a+=")"}else for(h=t;n&&h--;)a+=n/s|0,n%=s,n*=10;return a}},void 0===(s=function(){return f}.apply(e,[]))||(t.exports=s)}()},function(t,e,n){"use strict";function s(t,e,n){return n||(n=Math.random),t+Math.floor(n()*(e-t+1))}function i(t,e,n){let i=[];for(let s=t;s<e+1;s++)n(s)&&i.push(s);if(i===[])throw new Error("overfiltered");return i[s(0,i.length-1)]}function r(t,e){if(0===[...t].length)throw"empty array";e||(e=Math.random);let n=s(0,(t.length||t.size)-1,e);return[...t][n]}function o(t,e){if(!t)return e;if(!e)return t;for(;;){if(!(t%=e))return e;if(!(e%=t))return t}}function a(t,e,n){for(var s=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0,r=s.length-1;i<r;++i){var o=s[i];if(!(o in t))return;t=t[o]}if(void 0===n)return t[s[r]];t[s[r]]=n}n.r(e);var h=n(0),c=n.n(h);class l{constructor(t,e){!isNaN(t)&&e instanceof Map?(this.c=t,this.vs=e):"string"==typeof t?this.initStr(t):isNaN(t)?(this.c=4,this.vs=new Map([["x",2],["y",1]])):(this.c=t,this.vs=new Map)}clone(){const t=new Map(this.vs);return new l(this.c,t)}mul(t){t instanceof l||(t=new l(t));const e=this.c*t.c;let n=new Map;return this.vs.forEach((e,s)=>{t.vs.has(s)?n.set(s,this.vs.get(s)+t.vs.get(s)):n.set(s,this.vs.get(s))}),t.vs.forEach((e,s)=>{n.has(s)||n.set(s,t.vs.get(s))}),n=new Map([...n.entries()].sort()),new l(e,n)}toLatex(){if(0===this.vs.size)return this.c.toString();let t=1===this.c?"":-1===this.c?"-":this.c.toString();return this.vs.forEach((e,n)=>{t+=1===e?n:n+"^"+e}),t}sort(){this.vs=new Map([...this.vs.entries()].sort())}cleanZeros(){this.vs.forEach((t,e)=>{0===t&&this.vs.delete(e)})}like(t){t instanceof l||(t=new l(t));let e=!0;return this.vs.forEach((n,s)=>{t.vs.has(s)&&t.vs.get(s)===n||(e=!1)}),t.vs.forEach((t,n)=>{this.vs.has(n)&&this.vs.get(n)===t||(e=!1)}),e}add(t,e){if(t instanceof l||(t=new l(t)),void 0===e&&(e=!0),e&&!this.like(t))throw new Error("Adding unlike terms");const n=this.c+t.c,s=this.vs;return new l(n,s)}initStr(t){const e=t.match(/^-?\d*/)[0],n=""===e?1:"-"===e?-1:parseInt(e);let s=t.match(/([a-zA-Z])(\^\d+)?/g);s||(s=[]);for(let t=0;t<s.length;t++){let e=s[t].split("^");e[1]=e[1]?parseInt(e[1]):1,s[t]=e}s=s.filter(t=>0!==t[1]),this.c=n,this.vs=new Map(s)}static var(t){const e=new Map([[t,1]]);return new l(1,e)}}class d{constructor(t){Array.isArray(t)&&t[0]instanceof l?(t.map(t=>t.clone()),this.terms=t):isNaN(t)?"string"==typeof t&&this.initStr(t):this.initNum(t)}initStr(t){t=(t=(t=t.replace(/\+-/g,"-")).replace(/-/g,"+-")).replace(/\s/g,""),this.terms=t.split("+").map(t=>new l(t)).filter(t=>0!==t.c)}initNum(t){this.terms=[new l(t)]}toLatex(){let t="";for(let e=0;e<this.terms.length;e++)e>0&&this.terms[e].c>=0&&(t+="+"),t+=this.terms[e].toLatex();return t}toString(){return this.toLaTeX()}clone(){const t=this.terms.map(t=>t.clone());return new d(t)}simplify(){let t=this.terms.slice(),e=[];for(let n=0;n<t.length;n++){if(!t[n])continue;let s=t[n];for(let e=n+1;e<t.length;e++)t[e]&&t[e].like(t[n])&&(s=s.add(t[e]),t[e]=null);e.push(s),t[n]=null}return e=e.filter(t=>0!==t.c),new d(e)}add(t,e){t instanceof d||(t=new d(t)),void 0===e&&(e=!0);let n=this.terms.concat(t.terms),s=new d(n);return e&&(s=s.simplify()),s}mul(t,e){t instanceof d||(t=new d(t));let n=[];void 0===e&&(e=!0);for(let e=0;e<this.terms.length;e++)for(let s=0;s<t.terms.length;s++)n.push(this.terms[e].mul(t.terms[s]));let s=new d(n);return e&&(s=s.simplify()),s}pow(t,e){let n=this;for(let e=1;e<t;e++)n=n.mul(this);return e&&(n=n.simplify()),n}static var(t){const e=[l.var(t)];return new d(e)}static x(){return d.var("x")}static const(t){return new d(t)}}class u{constructor(t,e){this.x=t,this.y=e}rotate(t){var e,n;return e=Math.cos(t)*this.x-Math.sin(t)*this.y,n=Math.sin(t)*this.x+Math.cos(t)*this.y,this.x=e,this.y=n,this}scale(t){return this.x=this.x*t,this.y=this.y*t,this}translate(t,e){return this.x+=t,this.y+=e,this}clone(){return new u(this.x,this.y)}equals(t){return this.x===t.x&&this.y===t.y}moveToward(t,e){const n=u.unitVector(this,t);return this.translate(n.x*e,n.y*e),this}static fromPolar(t,e){return new u(Math.cos(e)*t,Math.sin(e)*t)}static fromPolarDeg(t,e){return e=e*Math.PI/180,u.fromPolar(t,e)}static mean(...t){let e=t.map(t=>t.x).reduce((t,e)=>t+e),n=t.map(t=>t.y).reduce((t,e)=>t+e),s=t.length;return new u(e/s,n/s)}static min(t){let e=t.reduce((t,e)=>Math.min(t,e.x),1/0),n=t.reduce((t,e)=>Math.min(t,e.y),1/0);return new u(e,n)}static max(t){let e=t.reduce((t,e)=>Math.max(t,e.x),-1/0),n=t.reduce((t,e)=>Math.max(t,e.y),-1/0);return new u(e,n)}static center(t){const e=t.reduce((t,e)=>Math.min(t,e.x),1/0),n=t.reduce((t,e)=>Math.min(t,e.y),1/0),s=t.reduce((t,e)=>Math.max(t,e.x),-1/0),i=t.reduce((t,e)=>Math.max(t,e.y),-1/0);return new u((s+e)/2,(i+n)/2)}static unitVector(t,e){const n=e.x-t.x,s=e.y-t.y,i=Math.hypot(n,s);return{x:n/i,y:s/i}}static distance(t,e){return Math.hypot(t.x-e.x,t.y-e.y)}static repel(t,e,n,s){const i=Math.hypot(t.x-e.x,t.y-e.y);if(i>=n)return!1;const r=(s-i)/2;return t.moveToward(e,-r),e.moveToward(t,-r),!0}}class f{constructor(t,e,n,s){this.question=t,this.width=e,this.height=n,this.answered=!1,this.rotation=s,this.success=!0,this.labels=[]}get allpoints(){return[]}showAnswer(){if(!this.answered)return this.labels.forEach(t=>{t.text=t.texta,t.style=t.stylea}),this.answered=!0}hideAnswer(){if(this.answered)return this.labels.forEach(t=>{t.text=t.textq,t.style=t.styleq}),this.answered=!1}toggleAnswer(){return this.answered?this.hideAnswer():this.showAnswer()}scale(t){this.allpoints.forEach(function(e){e.scale(t)})}rotate(t){return this.allpoints.forEach(function(e){e.rotate(t)}),t}translate(t,e){this.allpoints.forEach(function(n){n.translate(t,e)})}randomRotate(){var t=2*Math.PI*Math.random();return this.rotate(t),t}scaleToFit(t,e,n){let s=u.min(this.allpoints),i=u.max(this.allpoints),r=i.x-s.x,o=i.y-s.y;this.scale(Math.min((t-n)/r,(e-n)/o)),s=u.min(this.allpoints),i=u.max(this.allpoints);const a=u.mean([s,i]);this.translate(t/2-a.x,e/2-a.y)}drawLabelsCanvas(t){const e=t.getContext("2d");this.labels.forEach(function(t){e.font=f.styles.get(t.style).font,e.fillStyle=f.styles.get(t.style).colour,e.textAlign=f.styles.get(t.style).align,e.textBaseline=f.styles.get(t.style).baseline,e.fillText(t.text,t.pos.x,t.pos.y)})}drawLabelsHtml(t){const e=t.parentNode;this.labels.forEach(function(n){const s=document.createElement("div"),i=document.createElement("div");if(s.classList.add("label"),s.classList+=" "+n.style,s.style.left=n.pos.x+"px",s.style.top=n.pos.y+"px",katex.render(n.text,i),s.appendChild(i),e.appendChild(s),i.offsetWidth/i.offsetHeight>2){const t=n.text.replace(/\+/,"\\!+\\!").replace(/-/,"\\!-\\!");katex.render(t,i)}const r=s.offsetWidth,o=s.offsetHeight;s.style.left=n.pos.x-r/2+"px",s.style.top=n.pos.y-o/2+"px",n.pos.x<t.width/2-5&&n.pos.x+r/2>t.width/2&&(s.style.left=t.width/2-r-3+"px"),n.pos.x>t.width/2+5&&n.pos.x-r/2<t.width/2&&(s.style.left=t.width/2+3+"px")})}}f.styles=new Map([["normal",{font:"16px Arial",colour:"Black",align:"center",baseline:"middle"}],["answer",{font:"16px Arial",colour:"Red",align:"center",baseline:"middle"}],["extra-answer",{font:"16px Arial",colour:"Red",align:"left",baseline:"bottom"}],["extra-info",{font:"16px Arial",colour:"Black",align:"left",baseline:"bottom"}]]);class m extends f{constructor(t,e,n,s){super(t,e,n,s);const i=.35*Math.min(e,n),r=this.question.n;this.O=new u(0,0),this.vertices=[];for(let t=0;t<r;t++){const e=t*Math.PI*2/r-Math.PI/2;this.vertices[t]=u.fromPolar(i,e)}this.sides=[];for(let t=0;t<r;t++)this.sides[t]=u.mean(this.vertices[t],this.vertices[(t+1)%r]);const o=u.min(this.allpoints),a=u.max(this.allpoints),h=u.mean(o,a);this.translate(e/2-h.x,n/2-h.y),this.labels=[],this.question.vertices.forEach((t,e)=>{const n=t.val.toLatex?t.val.toLatex(!0):t.val.toString();this.labels.push({pos:this.vertices[e],textq:t.hidden?"":n,texta:n,styleq:"normal vertex",stylea:t.hidden?"answer vertex":"normal vertex"})}),this.question.sides.forEach((t,e)=>{const n=t.val.toLatex?t.val.toLatex(!0):t.val.toString();this.labels.push({pos:this.sides[e],textq:t.hidden?"":n,texta:n,styleq:"normal side",stylea:t.hidden?"answer side":"normal side"})}),this.labels.push({pos:this.O,textq:this.question.opname,texta:this.question.opname,styleq:"normal",stylea:"normal"}),this.labels.forEach(t=>{t.text=t.textq,t.style=t.styleq})}get allpoints(){return[this.O].concat(this.vertices).concat(this.sides)}drawIn(t){const e=t.getContext("2d"),n=this.question.n;e.clearRect(0,0,t.width,t.height);const s=t.parentNode.getElementsByClassName("label");for(;s.length>0;)s[0].remove();e.beginPath();for(let t=0;t<n;t++){const s=this.vertices[t],i=this.vertices[(t+1)%n];e.moveTo(s.x,s.y),e.lineTo(i.x,i.y)}e.stroke(),e.closePath(),this.drawLabelsHtml(t)}}function g(){}n.d(e,"default",function(){return g}),window.addEventListener("DOMContentLoaded",function(){g.init()}),g.init=function(){g.settings.toPage(),document.getElementById("generate").addEventListener("click",function(t){t.preventDefault(),g.generateAll()}),document.getElementById("print").addEventListener("click",function(t){window.print(),t.preventDefault()}),document.getElementById("showoptions").addEventListener("click",g.toggleOptions),document.getElementById("display-box").addEventListener("click",function(t){let e=t.target;if(e.classList.contains("refresh")){let t=e.closest(".question-container").dataset.question_index;g.hideAnswer(t),g.generate(t)}else if(e.classList.contains("answer-toggle")){let t=e.closest(".question-container").dataset.question_index;g.toggleAnswer(t,e)}}),document.getElementById("show-answers").addEventListener("click",g.toggleAllAnswers),document.addEventListener("change",function(t){g.settings.fromPage(),g.optionsActions(t),"options-type"===t.target.name&&g.toggleHidden(["options-advanced","options-simple"])}),document.getElementById("zoom").addEventListener("click",function(t){const e=t.target;"zoomin"===e.id?g.zoom(1):"zoomout"==e.id&&g.zoom(-1)}),document.body.addEventListener("click",function(t){const e=t.target;e.dataset.modal&&(g.modalOpen(e.dataset.modal),t.preventDefault())}),document.getElementById("modal-overlay").addEventListener("click",function(t){t.target.closest(".modal")||g.modalClose()})},g.toggleOptions=function(t){let e=document.getElementById("showoptions"),n=document.getElementById("options").classList.toggle("hidden");e.innerHTML=n?"Show options":"Hide options",t&&t.preventDefault()},g.toggleAnswer=function(t){let e=g.questions[t].viewobject.toggleAnswer();g.draw(t);let n=g.questions[t].container;n.classList.toggle("answer");let s=n.querySelector(".answer-toggle");s.innerHTML=e?"Hide answer":"Show answer"},g.showAnswer=function(t){g.questions[t].viewobject.showAnswer(),g.draw(t);let e=g.questions[t].container;e.classList.add("answer"),e.querySelector(".answer-toggle").innerHTML="Hide answer"},g.hideAnswer=function(t){g.questions[t].viewobject.hideAnswer(),g.draw(t);let e=g.questions[t].container;e.classList.remove("answer"),e.querySelector(".answer-toggle").innerHTML="Show answer"},g.hideAllAnswers=function(){g.questions.forEach(function(t,e){g.hideAnswer(e)}),document.getElementById("show-answers").innerHTML="Show answers",g.answered=!1},g.showAllAnswers=function(){g.questions.forEach(function(t,e){g.showAnswer(e)}),document.getElementById("show-answers").innerHTML="Hide answers",g.answered=!0},g.toggleAllAnswers=function(t){g.answered?g.hideAllAnswers():g.showAllAnswers(),t&&t.preventDefault()},g.answered=!1,g.clear=function(){document.getElementById("display-box").innerHTML="",g.questions=[],document.getElementById("show-answers").removeAttribute("disabled"),g.hideAllAnswers()},g.draw=function(t){const e=g.questions[t].viewobject,n=g.questions[t].container.querySelector("canvas");e.drawIn(n)},g.reDraw=function(t){const e="number"==typeof t?g.questions[t]:t,n=e.container.querySelector("canvas");n.width=g.settings.canvas_width,n.height=g.settings.canvas_height;const s=e.viewobject.question,i=new m(s,g.settings.canvas_width,g.settings.canvas_height);e.viewobject=i,i.drawIn(n)},g.drawAll=function(){g.questions.forEach(function(t){const e=t.viewobject,n=t.container.querySelector("canvas");e.drawIn(n)})},g.generate=function(t){const e=g.settings.n_questions,n=g.settings.mindiff,a=g.settings.maxdiff,h=n+Math.floor(t*(a-n+1)/e),l=new class{constructor(t){const e=Object.assign({},{op:"add",n:3,num_diff:1,puz_diff:1,type:"integer"},t);switch(this.n=e.n,this.vertices=[],this.sides=[],e.type.endsWith("add")?(this.opname="+",this.op=((t,e)=>t.add(e))):e.type.endsWith("multiply")&&(this.opname="×",this.op=((t,e)=>t.mul(e))),e.type){case"integer-add":case"integer-multiply":this.initInteger(e);break;case"fraction-add":this.initFractionAdd(e);break;case"fraction-multiply":this.initFractionMultiply(e);break;case"algebra-add":this.initAlgebraAdd(e);break;case"algebra-multiply":this.initAlgebraMultiply(e);break;default:throw new Error("Unexpected switch default")}for(let t=0;t<this.n;t++)this.sides[t]={val:this.op(this.vertices[t].val,this.vertices[(t+1)%this.n].val),hidden:!1};switch(e.puz_diff){case 1:this.sides.forEach(t=>{t.hidden=!0});break;case 2:{this.sides.forEach(t=>{t.hidden=!0});const t=s(0,this.n-1,Math.random),e=Math.random()<.5?t:(t+1)%this.n;this.sides[t].hidden=!1,this.vertices[e].hidden=!0;break}case 3:this.vertices.forEach(t=>{t.hidden=!0});break;default:throw new Error("no_difficulty")}}initInteger(t){for(let e=0;e<this.n;e++)this.vertices[e]={val:new c.a(i(t.min,t.max,e=>t.type.endsWith("add")||0!==e)),hidden:!1}}initFractionAdd(t){const e=t.num_diff;if(e<3){const t=r([5,7,9,11,13,17]);for(let n=0;n<this.n;n++){const s=this.vertices[n-1]?this.vertices[n-1].val.n:void 0,r=this.vertices[(n+1)%this.n]?this.vertices[(n+1)%this.n].val.n:void 0,a=i(1,2===e?t-1:r?t-Math.max(r,s):s?t-s:t-1,e=>!(1!==o(e,t)||s&&1!==o(e+s,t)&&e+s!==t||r&&1!==o(e+r,t)&&e+r!==t));this.vertices[n]={val:new c.a(a,t),hidden:!1}}}else{const t=r(e<7?[2,3,5]:[2,3,4,5,6,7,8,9,10,11]);for(let n=0;n<this.n;n++){const s=this.vertices[n-1]?this.vertices[n-1].val:void 0,r=this.vertices[(n+1)%this.n]?this.vertices[(n+1)%this.n].val:void 0,a=n%2==1||e>4?i(2,e<7?4:8,e=>!(s&&e===s.d/t||r&&e===r.d/t)):1,h=t*a;let l;l=e<6?i(1,h-1,t=>1===o(t,h)&&(e>=4||!s||s.add(t,h)<=1)&&(e>=4||!r||r.add(t,h)<=1)):e<8?i(h+1,6*h,t=>1===o(t,h)):i(10*h,100*h,t=>1===o(t,h)),this.vertices[n]={val:new c.a(l,h),hidden:!1}}}}initFractionMultiply(t){for(let t=0;t<this.n;t++){const e=s(2,10),n=s(1,e-1);this.vertices[t]={val:new c.a(n,e),hidden:!1}}}initAlgebraAdd(t){switch(t.num_diff){case 1:{const t=String.fromCharCode(s(97,122));for(let e=0;e<this.n;e++){const n=s(1,10).toString();this.vertices[e]={val:new d(n+t),hidden:!1}}}break;case 2:default:if(Math.random()<.5){const t=String.fromCharCode(s(97,122));for(let e=0;e<this.n;e++){const n=s(1,10).toString(),i=s(1,10).toString();this.vertices[e]={val:new d(n+t+"+"+i),hidden:!1}}}else{const t=String.fromCharCode(s(97,122));let e=t;for(;e===t;)e=String.fromCharCode(s(97,122));for(let n=0;n<this.n;n++){const i=s(1,10).toString(),r=s(1,10).toString();this.vertices[n]={val:new d(i+t+"+"+r+e),hidden:!1}}}}}initAlgebraMultiply(t){const e=t.num_diff;switch(e){case 1:{const t=String.fromCharCode(s(97,122));for(let e=0;e<this.n;e++){const n=s(1,10).toString(),i=e%2==0?n:n+t;this.vertices[e]={val:new d(i),hidden:!1}}break}case 2:{const t=String.fromCharCode(s(97,122)),e=String.fromCharCode(s(97,122));for(let n=0;n<this.n;n++){const i=s(1,10).toString(),o=r([t,e]);this.vertices[n]={val:new d(i+o),hidden:!1}}break}case 3:{const t=String.fromCharCode(s(97,122));for(let e=0;e<this.n;e++){const n=s(1,10).toString(),i=s(1,3).toString();this.vertices[e]={val:new d(n+t+"^"+i),hidden:!1}}break}case 4:{const t=s(97,120),e=String.fromCharCode(t),n=String.fromCharCode(t+1),i=String.fromCharCode(t+2);for(let t=0;t<this.n;t++){const r=s(1,10).toString()+e+"^"+s(0,3).toString()+n+"^"+s(0,3).toString()+i+"^"+s(0,3).toString();this.vertices[t]={val:new d(r),hidden:!1}}break}case 5:case 6:{const t=String.fromCharCode(s(97,122));for(let n=0;n<this.n;n++){const i=s(1,10).toString(),r=s(-9,9).toString();let o=i;6!==e&&n%2!=1||(o+=t),n%2==1&&(o+="+"+r),this.vertices[n]={val:new d(o),hidden:!1}}break}case 7:{const t=s(97,120),e=String.fromCharCode(t),n=String.fromCharCode(t+1);for(let t=0;t<this.n;t++){let i=s(1,10).toString()+e+"^"+s(0,3).toString()+n+"^"+s(0,3).toString();t%2==1&&(i+="+"+s(-9,9).toString()+e+"^"+s(0,3).toString()+n+"^"+s(0,3).toString()),this.vertices[t]={val:new d(i),hidden:!1}}break}case 8:default:{const t=String.fromCharCode(s(97,122));for(let e=0;e<this.n;e++){const n=s(-9,9).toString();this.vertices[e]={val:new d(t+"+"+n),hidden:!1}}}}}}(Object.assign({},g.settings.options,{num_diff:h})),u=new m(l,g.settings.canvas_width,g.settings.canvas_height);g.questions[t]=Object.assign({},g.questions[t],{viewobject:u,type:l.type,subtype:l.subtype}),g.draw(t)},g.generateAll=function(){g.clear();let t=g.settings.n_questions;for(let e=0;e<t;e++){let t=document.createElement("div");t.className="question-container",t.dataset.question_index=e;let n=document.createElement("canvas");n.width=g.settings.canvas_width,n.height=g.settings.canvas_height,n.className="question-view",t.append(n);let s=document.createElement("img");s.src="refresh.png",s.className="refresh",s.width=15,s.height=15,t.append(s);let i=document.createElement("div");i.innerHTML="Show answer",i.className="answer-toggle",t.append(i),document.getElementById("display-box").append(t),g.questions[e]=Object.assign({},g.questions[e],{container:t}),g.generate(e)}},g.zoom=function(t){g.settings.zoom+=.1*t,g.settings.canvas_width=g.settings.canvas_width_base*g.settings.zoom,g.settings.canvas_height=g.settings.canvas_height_base*g.settings.zoom,g.questions.forEach(function(t){g.reDraw(t)})},g.questions=[],g.settings={canvas_width_base:250,canvas_height_base:250,canvas_width:250,canvas_height:250,zoom:1,mindiff:1,maxdiff:5,options:{min:-20,max:20,n:4,num_diff:2,puz_diff:1,type:"integer-add"},n_questions:8,debug:!0},g.settings.fromPage=function(){const t=document.getElementsByClassName("option");for(let e=0,n=t.length;e<n;++e){const n=t[e],s=isNaN(n.value)?n.value:Number(n.value);let i=n.dataset.setting;i.endsWith("[]")?(a(this,i=i.slice(0,-2))||a(this,i,new Set),n.checked?a(this,i).add(s):a(this,i).delete(s)):"checkbox"===n.type?a(this,i,!!n.checked):(n.checked||"radio"!==n.type&&"checkbox"!==n.type)&&a(this,i,s)}},g.settings.toPage=function(){const t=document.getElementsByClassName("option");for(let e=0,n=t.length;e<n;++e){const n=t[e],s=n.value;let i=n.dataset.setting;i.endsWith("[]")?a(this,i=i.slice(0,-2)).has(s)?n.checked=!0:n.checked=!1:"radio"===n.type?a(this,i)===s&&(n.checked=!0):"checkbox"===n.type?n.checked=!!a(this,i):n.value=a(this,i)}},g.modalOpen=function(t){const e=document.getElementById(t)||document.getElementById("default-modal");if(e.classList.contains("modal")){const t=document.getElementById("modal-overlay");t.appendChild(e),t.classList.remove("hidden")}},g.modalClose=function(){const t=document.getElementById("modal-overlay"),e=t.getElementsByClassName("modal");for(;e.length>0;)document.body.appendChild(e[0]);t.classList.add("hidden")},g.optionsActions=function(t){switch(t.target.name){case"options-type":g.toggleHidden(["options-advanced","options-simple"]);break;case"type":{const e=g.settings;t.target.value.startsWith("algebra")?e.zoom=1.4:e.zoom=1,e.canvas_width=e.canvas_width_base*e.zoom,e.canvas_height=e.canvas_height_base*e.zoom,t.target.value.startsWith("integer")?(document.getElementById("difficulty").classList.add("hidden"),document.getElementById("minmax").classList.remove("hidden")):(document.getElementById("difficulty").classList.remove("hidden"),document.getElementById("minmax").classList.add("hidden"))}}},g.toggleHidden=function(t){for(let e=0;e<t.length;e++)document.getElementById(t[e]).classList.toggle("hidden")}}]);